<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>V-Prediction æƒé‡ä¹‹è°œï¼šç†è®ºä¸å®è·µçš„äº¤äº’å¼è§£é‡Š</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Serene Dawn -->
    <!-- Application Structure Plan: æœ¬åº”ç”¨é‡‡ç”¨å•é¡µã€åˆ†èŠ‚çš„å™äº‹ç»“æ„ã€‚ç”¨æˆ·ä»ä¸Šåˆ°ä¸‹æ»šåŠ¨ï¼Œé¦–å…ˆç†è§£ Epsilon-Prediction é¢ä¸´çš„â€œä¸å¹³è¡¡â€é—®é¢˜ï¼Œç„¶åé€šè¿‡ä¸€ä¸ªæ ¸å¿ƒçš„äº¤äº’å¼æ¨¡å—æ¢ç´¢ V-Prediction æ˜¯å¦‚ä½•é€šè¿‡å…¶â€œå¤©ç„¶å¹³è¡¡â€çš„è®¾è®¡æ¥è§£å†³è¿™ä¸ªé—®é¢˜çš„ï¼Œæœ€åé€šè¿‡ä¸€ä¸ªç›´è§‚çš„ç±»æ¯”è¿›è¡Œæ€»ç»“ã€‚è¿™ç§ç»“æ„æ—¨åœ¨å¼•å¯¼ç”¨æˆ·é€æ­¥æ·±å…¥ï¼Œä»å‘ç°é—®é¢˜åˆ°ç†è§£è§£å†³æ–¹æ¡ˆï¼Œç¬¦åˆè®¤çŸ¥è§„å¾‹ï¼Œèƒ½æœ€æœ‰æ•ˆåœ°è§£é‡Šè¿™ä¸ªå¤æ‚ä½†å…³é”®çš„æ¦‚å¿µã€‚ -->
    <!-- Visualization & Content Choices:
        1. æ ¸å¿ƒé—®é¢˜ -> ä¿¡æ¯ -> é™æ€æ–‡æœ¬å’Œæ•°å­¦å…¬å¼ -> é˜æ˜ç†è®ºä¸å®è·µçš„çŸ›ç›¾ã€‚
        2. Epsilon-Prediction çš„å›°å¢ƒ -> æ¯”è¾ƒ -> HTML/CSS æ¨¡æ‹Ÿçš„å¤©å¹³å›¾ç¤º + æ–‡æœ¬ -> å½¢è±¡åŒ–å±•ç¤ºä¸åŒå™ªå£°æ°´å¹³ä¸‹å­¦ä¹ éš¾åº¦çš„â€œä¸å¹³è¡¡â€ -> ä½¿ç”¨ç›´è§‚æ¯”å–»ï¼Œæ— éœ€å›¾è¡¨åº“ã€‚
        3. V-Prediction çš„è®¾è®¡ -> æ¢ç´¢ä¸åˆ†æ -> äº¤äº’å¼æ»‘å— + Chart.js åŠ¨æ€å›¾è¡¨ + åŠ¨æ€æ›´æ–°çš„æ•°å­¦å…¬å¼ -> å…è®¸ç”¨æˆ·äº²æ‰‹æ“ä½œï¼Œç›´è§‚æ„Ÿå— V-Prediction ç›®æ ‡å‘é‡çš„â€œæ•°å€¼ç¨³å®šæ€§â€ -> è¿™æ˜¯å›ç­”æ ¸å¿ƒé—®é¢˜çš„å…³é”®ï¼Œäº¤äº’æ€§æœ€å¼ºï¼Œé€‰ç”¨ Chart.js å±•ç¤ºé‡çº§å˜åŒ–ï¼Œæ¸…æ™°ç›´æ¥ã€‚
        4. æ€»ç»“å¯¹æ¯” -> æ¯”è¾ƒä¸ç»¼åˆ -> HTML/CSS å›¾æ ‡ + æ–‡æœ¬ -> ä½¿ç”¨â€œæ•™ç»ƒä¸è¿åŠ¨å‘˜â€çš„æ¯”å–»ï¼Œå·©å›ºç†è§£ï¼Œå¼ºåŒ–è®°å¿†ã€‚
        5. æ‰€æœ‰æ•°å­¦å…¬å¼ä½¿ç”¨ MathJax æ¸²æŸ“ï¼Œç¡®ä¿æ¸…æ™°æ˜“è¯»ã€‚
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'background': '#F5F5DC', // ç±³è‰²èƒŒæ™¯
                        'text-main': '#4A4A4A', // æ·±ç°è‰²æ–‡æœ¬
                        'primary': '#D2B48C', // é£é©è‰²
                        'accent': '#8FBC8F', // æš—æµ·ç»¿è‰²
                        'highlight': '#FFA07A', // äº®é²‘è‰²
                    },
                    fontFamily: {
                        'sans': ['Noto Sans SC', 'sans-serif'],
                    }
                }
            }
        }
    </script>
    <!-- PrismJS for colored code blocks -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/themes/prism-okaidia.min.css">
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/line-numbers/prism-line-numbers.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/toolbar/prism-toolbar.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/copy-to-clipboard/prism-copy-to-clipboard.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-markup.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-bash.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-python.min.js" defer></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <!-- Replace MathJax include with unified v3 config -->
    <script>
      window.MathJax = {
        tex: {
          inlineMath: [["$", "$"], ["\\(", "\\)"]],
          displayMath: [["$$","$$"], ["\\[","\\]"]],
          processEscapes: true
        },
        options: { skipHtmlTags: ["script","noscript","style","textarea","pre","code"] },
        chtml: { scale: 1.0 }
      };
    </script>
    <script id="MathJax-script" defer src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
    <style>
        body {
            font-family: 'Noto Sans SC', sans-serif;
        }
        .card {
            background-color: rgba(255, 255, 255, 0.6);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(210, 180, 140, 0.3);
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 40vh;
        }
        /* Prism ä»£ç å—å®¹å™¨ä¼˜åŒ–ï¼Œç»Ÿä¸€ä¸º CFM é£æ ¼ */
        pre[class*="language-"] {
            border-radius: 12px; border: 1px solid #e5e7eb; box-shadow: var(--shadow);
            margin: 12px 0; padding: 14px; background: #0b1220;
        }
        .prism-title {
            display: inline-block; margin-bottom: 6px; font-size: 12px; color: #64748b;
            background: #e2e8f0; border: 1px solid #cbd5e1; border-radius: 999px; padding: 2px 8px;
        }
        /* è°ƒæ•´ line-numbers æ’ä»¶çš„æ ·å¼ */
        pre.line-numbers { position: relative; padding-left: 3.5em; }
        .line-numbers .line-numbers-rows { border-right: 1px solid rgba(255,255,255,0.08); }
        /* Inline code ç»Ÿä¸€ä¸º CFM é£æ ¼ */
        code:not(pre code) {
            border: 1px solid #d1d5db; color: #111827; padding: 2px 6px; border-radius: 6px;
            box-shadow: inset 0 1px 0 rgba(255,255,255,0.6);
            background: #f8fafc;
            font-size: 0.9em;
        }
        /* CFM å¸ƒå±€ä¸å¯¼èˆªæ ·å¼ */
        :root { --panel: #ffffff; --text: #1f2937; --muted: #6b7280; --brand1: #0ea5e9; --brand2: #10b981; --brand3: #8b5cf6; --shadow: 0 10px 30px rgba(2, 6, 23, 0.12); }
        .hero { background: radial-gradient(1200px circle at 10% 0%, rgba(14,165,233,0.12), transparent 40%),
                 radial-gradient(1000px circle at 90% 0%, rgba(139,92,246,0.12), transparent 40%),
                 linear-gradient(180deg, #ffffff 0%, #f1f5f9 100%);
                 padding: 56px 24px 28px; text-align: center; border-bottom: 1px solid #e5e7eb; }
        .badge { display:inline-block; background: linear-gradient(90deg, var(--brand1), var(--brand3)); color:white; border-radius: 999px; padding: 4px 10px; font-size: 12px; }
        .title { font-size: 28px; font-weight: 800; letter-spacing: 0.2px; }
        .subtitle { margin-top: 10px; color: var(--muted); }
        .meta { margin-top: 14px; font-size: 14px; color: var(--muted); }
        .container { max-width: 1080px; margin: 24px auto; padding: 0 16px; display: grid; grid-template-columns: 1fr; gap: 24px; }
        .toc { position: fixed; left: 0; top: 0; width: var(--sidebar-w); height: 100vh; background: linear-gradient(180deg, #ffffff 0%, #f8fafc 100%); border-right: 1px solid #e5e7eb; box-shadow: 4px 0 24px rgba(2,6,23,0.06); padding: 16px 12px; z-index: 1000; overflow-y: auto; }
        .toc h3 { margin: 0 0 10px; font-size: 16px; }
        .toc ul { list-style: none; padding: 0; margin: 0; }
        .toc li { margin: 8px 0; }
    </style>
</head>
<body class="bg-background text-text-main antialiased">

    <div class="container mx-auto px-4 py-8 md:py-12">
        
        <header class="hero">
  <span class="badge">Flow Matching Â· Diffusion</span>
  <div class="title">V-Prediction æƒé‡ä¹‹è°œ</div>
  <div class="subtitle">ç†è®ºä¸å®è·µçš„äº¤äº’å¼æ¢ç´¢</div>
  <div class="meta">ä½œè€…ï¼šhhhhhyphen</div>
</header>

<div class="container">
  <nav class="toc">
    <h3>ç›®å½•</h3>
    <ul>
      <li><a href="#intro">å¼•è¨€</a></li>
      <li><a href="#epsilon">Epsilon-Prediction å›°å¢ƒ</a></li>
      <li><a href="#vp">V-Prediction è®¾è®¡</a></li>
      <li><a href="#analogy">æ¯”å–»</a></li>
      <li><a href="#conclusion">ç»“è®º</a></li>
    </ul>
  </nav>

  <section class="space-y-12 md:space-y-20">

            <!-- Section 1: The Core Question -->
            <section class="max-w-3xl mx-auto">
                <div class="card p-6 md:p-8 rounded-2xl shadow-lg">
                    <h2 class="text-2xl font-bold mb-4 text-gray-700" id="intro">ä¸€ä¸ªçŸ›ç›¾ï¼šç†è®ºæ¨å¯¼ vs. å·¥ç¨‹å®è·µ</h2>
                    <p class="text-base md:text-lg leading-relaxed">
                        æ‚¨å¥½ï¼æˆ‘ä»¬ä» Flow Matching çš„ç¬¬ä¸€æ€§åŸç†ä¸¥æ ¼æ¨å¯¼å‘ç°ï¼Œæ— è®ºæ˜¯ Epsilon-predictionè¿˜æ˜¯ V-predictionï¼Œå®ƒä»¬çš„æŸå¤±å‡½æ•°éƒ½åº”è¯¥å¸¦æœ‰ä¸€ä¸ªå¤æ‚çš„ã€ä¸æ—¶é—´ `t` ç›¸å…³çš„æƒé‡ \(\lambda(t)\)ã€‚
                    </p>
                    <p class="mt-4 text-base md:text-lg leading-relaxed">
                        ç„¶è€Œï¼Œåœ¨è®¸å¤šä¸»æµæ‰©æ•£æ¨¡å‹çš„ä»£ç å®ç°ä¸­ï¼ŒV-prediction çš„æŸå¤±å‡½æ•°å´å¸¸å¸¸æ˜¯ç®€å•çš„æ— æƒé‡å½¢å¼ï¼š
                    </p>
                    <div class="bg-gray-100 p-4 rounded-lg mt-4 text-center text-lg font-mono">
                        \(\mathcal{L}_v = \mathbb{E} \left\| v_\theta(x_t, t) - v \right\|^2\)
                    </div>
                    <p class="mt-4 text-base md:text-lg leading-relaxed">
                        ä¸ºä»€ä¹ˆç†è®ºä¸Šçš„æƒé‡åœ¨å®è·µä¸­â€œæ¶ˆå¤±â€äº†ï¼Ÿæœ¬é¡µé¢å°†é€šè¿‡äº¤äº’å¼æ¢ç´¢ï¼Œä¸ºæ‚¨æ­å¼€è¿™ä¸ªè°œé¢˜ã€‚
                    </p>
                </div>
            </section>
            
            <!-- Section 2: Epsilon-Prediction's Dilemma -->
            <section class="max-w-4xl mx-auto">
                <h2 class="text-3xl font-bold text-center mb-8 text-gray-700" id="epsilon">1. Epsilon-Prediction çš„â€œä¸å¹³è¡¡â€å›°å¢ƒ</h2>
                <div class="grid md:grid-cols-2 gap-8 items-center">
                    <div class="card p-6 md:p-8 rounded-2xl shadow-lg">
                        <h3 class="text-xl font-semibold mb-3 text-gray-700">å­¦ä¹ éš¾åº¦çš„å·¨å¤§å·®å¼‚</h3>
                        <p class="leading-relaxed mb-4">
                            Epsilon-Prediction çš„ç›®æ ‡æ˜¯é¢„æµ‹å™ªå£° \(\epsilon\)ã€‚è¿™ä¸ªä»»åŠ¡çš„éš¾åº¦åœ¨ä¸åŒå™ªå£°é˜¶æ®µï¼ˆæ—¶é—´ `t`ï¼‰ä¸‹æ˜¯**æä¸å¹³è¡¡**çš„ã€‚
                        </p>
                        <ul class="space-y-3 list-inside list-disc">
                            <li><strong class="text-accent">t å¾ˆå° (å™ªå£°å°‘):</strong> ä»ä¸€å¼ é«˜æ¸…å›¾ç‰‡ä¸­æ‰¾å‡ºå¾®é‡çš„å™ªå£°ï¼Œä»»åŠ¡<strong class="text-highlight">éå¸¸å›°éš¾</strong>ã€‚</li>
                            <li><strong class="text-accent">t å¾ˆå¤§ (å™ªå£°å¤š):</strong> ä»ä¸€å †å™ªå£°ä¸­â€œè¯†åˆ«â€å‡ºå™ªå£°ï¼Œä»»åŠ¡<strong class="text-highlight">éå¸¸ç®€å•</strong>ã€‚</li>
                        </ul>
                         <p class="mt-4 leading-relaxed">
                            ç†è®ºä¸Šçš„æƒé‡ \(\lambda(t)\) æ­£æ˜¯ä¸ºäº†**è¡¥å¿**è¿™ç§éš¾åº¦å·®å¼‚ï¼Œå®ƒåœ¨å›°éš¾æ—¶ç»™äºˆé«˜æƒé‡ï¼Œåœ¨ç®€å•æ—¶ç»™äºˆä½æƒé‡ã€‚
                        </p>
                    </div>
                    <div class="flex flex-col items-center justify-center p-6">
                        <div class="text-center mb-2 font-semibold">å­¦ä¹ éš¾åº¦çš„å¤©å¹³</div>
                        <div class="w-full max-w-sm">
                            <div class="h-2 bg-primary rounded-full relative">
                                <div class="w-4 h-4 bg-gray-700 rounded-full absolute -top-1 left-1/2 -translate-x-1/2"></div>
                            </div>
                            <div class="flex justify-between mt-2 text-sm px-2">
                                <div class="text-center">
                                    <div class="font-bold text-highlight text-lg">å›°éš¾</div>
                                    <div class="text-xs text-gray-500">(t å¾ˆå°)</div>
                                </div>
                                <div class="text-center">
                                    <div class="font-bold text-highlight text-lg">ç®€å•</div>
                                    <div class="text-xs text-gray-500">(t å¾ˆå¤§)</div>
                                </div>
                            </div>
                        </div>
                        <p class="text-center mt-4 text-sm text-gray-600">
                            å»æ‰æƒé‡åï¼Œæ¨¡å‹ä¼šè‡ªç„¶åå‘äºåœ¨â€œç®€å•â€çš„ä¸€ç«¯åšå¾—æ›´å¥½ï¼Œè€Œå¯èƒ½å¿½ç•¥â€œå›°éš¾â€ä½†é‡è¦çš„ç»†èŠ‚ã€‚
                        </p>
                    </div>
                </div>
            </section>

            <!-- Section 3: The Genius of V-Prediction -->
            <section class="max-w-4xl mx-auto">
                <h2 class="text-3xl font-bold text-center mb-8 text-gray-700" id="vp">2. V-Prediction çš„â€œå¤©ç„¶å¹³è¡¡â€è®¾è®¡</h2>
                <p class="text-center max-w-3xl mx-auto mb-10 text-lg">
                    V-Prediction çš„å·§å¦™ä¹‹å¤„åœ¨äºï¼Œå®ƒè®¾è®¡çš„å›å½’ç›®æ ‡ \(v\) æœ¬èº«ï¼Œåœ¨æ•°å€¼å°ºåº¦ä¸Šæ˜¯**å¤©ç„¶å¹³è¡¡**çš„ã€‚è®©æˆ‘ä»¬é€šè¿‡ä¸‹é¢çš„äº¤äº’æ¨¡å—æ¥äº²èº«ä½“éªŒä¸€ä¸‹ã€‚
                </p>

                <div class="card p-6 md:p-8 rounded-2xl shadow-lg">
                    <div class="mb-6">
                        <label for="time-slider" class="block text-center font-medium mb-2">æ‹–åŠ¨æ»‘å—ï¼Œè§‚å¯Ÿæ—¶é—´ `t` çš„å˜åŒ–ï¼š</label>
                        <input id="time-slider" type="range" min="0" max="1" value="0.5" step="0.01" class="w-full h-2 bg-primary rounded-lg appearance-none cursor-pointer">
                        <div class="flex justify-between text-xs text-gray-500 mt-1">
                            <span>t = 0 (çº¯æ•°æ®)</span>
                            <span>t = 0.5</span>
                            <span>t = 1 (çº¯å™ªå£°)</span>
                        </div>
                    </div>

                    <div class="grid md:grid-cols-2 gap-6 md:gap-8 items-start">
                        <!-- Left column for formulas -->
                        <div class="space-y-4">
                            <div>
                                <h4 class="font-semibold text-gray-700">1. VP è·¯å¾„å®šä¹‰:</h4>
                                <div class="bg-gray-100 p-3 rounded-md text-sm">
                                    \(x_t = \alpha_t x_1 + \sigma_t \epsilon\)
                                </div>
                            </div>
                             <div>
                                <h4 class="font-semibold text-gray-700">2. V-Prediction ç›®æ ‡ `v` å®šä¹‰:</h4>
                                <div class="bg-gray-100 p-3 rounded-md text-sm">
                                    \(v = \alpha_t \epsilon - \sigma_t x_t\)
                                </div>
                            </div>
                            <div>
                                <h4 class="font-semibold text-gray-700">å½“å‰å‚æ•°å€¼:</h4>
                                <div id="params-display" class="bg-gray-100 p-3 rounded-md text-sm font-mono leading-relaxed"></div>
                            </div>
                        </div>
                        
                        <!-- Right column for chart -->
                        <div>
                            <h4 class="font-semibold text-center mb-2 text-gray-700">ç›®æ ‡å‘é‡çš„æœŸæœ›èŒƒæ•°ï¼ˆå¤§å°ï¼‰</h4>
                             <div class="chart-container">
                                <canvas id="normChart"></canvas>
                            </div>
                            <p id="chart-caption" class="text-center mt-2 text-sm text-gray-600"></p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Section 4: Analogy -->
             <section class="max-w-4xl mx-auto">
                <h2 class="text-3xl font-bold text-center mb-8 text-gray-700" id="analogy">3. ä¸€ä¸ªæ¯”å–»ï¼šèªæ˜çš„æ•™ç»ƒ</h2>
                <div class="grid md:grid-cols-2 gap-8">
                    <div class="card p-6 md:p-8 rounded-2xl shadow-lg">
                        <div class="text-3xl mb-3">ğŸ‹ï¸</div>
                        <h3 class="text-xl font-semibold mb-2 text-gray-700">æ™®é€šæ•™ç»ƒ (Epsilon-Prediction)</h3>
                        <p class="leading-relaxed">
                            è®©è¿åŠ¨å‘˜åœ¨å¹³åœ°å’Œé«˜åŸä¸Šéƒ½è·‘1å…¬é‡Œï¼Œå¹¶è¦æ±‚ç›¸åŒçš„æ—¶é—´ã€‚è¿™æ˜¾ç„¶ä¸å…¬å¹³ï¼Œæ‰€ä»¥éœ€è¦ä¸€ä¸ªå¤æ‚çš„**åŠ æƒè¯„åˆ†ç³»ç»Ÿ**ï¼ˆç†è®ºä¸Šçš„ \(\lambda(t)\)ï¼‰æ¥è¯„ä¼°æˆç»©ã€‚
                        </p>
                    </div>
                    <div class="card p-6 md:p-8 rounded-2xl shadow-lg">
                         <div class="text-3xl mb-3">ğŸ§ </div>
                        <h3 class="text-xl font-semibold mb-2 text-gray-700">èªæ˜æ•™ç»ƒ (V-Prediction)</h3>
                        <p class="leading-relaxed">
                            è®¾è®¡äº†ä¸€æ¡**å¹³è¡¡çš„èµ›é“**ï¼šé«˜åŸä¸Šçš„è·¯ç¨‹æ˜¯ä¸‹å¡ï¼Œå¹³åœ°ä¸Šçš„è·¯ç¨‹æ˜¯ä¸Šå¡ã€‚æœ€ç»ˆä½¿å¾—è¿åŠ¨å‘˜åœ¨ä»»ä½•èµ›æ®µè·‘1å…¬é‡Œçš„ä½“èƒ½æ¶ˆè€—éƒ½å·®ä¸å¤šã€‚è¿™æ ·ï¼Œå°±ä¸å†éœ€è¦å¤æ‚çš„åŠ æƒè¯„åˆ†äº†ã€‚
                        </p>
                    </div>
                </div>
            </section>
            
            <!-- Section 5: Conclusion -->
            <section class="max-w-3xl mx-auto text-center">
                <h2 class="text-3xl font-bold mb-4 text-gray-700" id="conclusion">ç»“è®º</h2>
                <div class="card p-6 md:p-8 rounded-2xl shadow-lg">
                    <p class="text-lg leading-relaxed">
                        V-prediction æŸå¤±å‡½æ•°åœ¨å®è·µä¸­å¯ä»¥ä¸å¸¦æƒé‡ï¼Œå¹¶éç»éªŒä¸Šçš„å¦¥åï¼Œè€Œæ˜¯**è®¾è®¡ä¸Šçš„èƒœåˆ©**ã€‚
                    </p>
                    <p class="mt-4 text-lg leading-relaxed">
                        å®ƒçš„å›å½’ç›®æ ‡ \(v\) è¢«å·§å¦™åœ°æ„é€ æˆäº†ä¸€ä¸ªåœ¨æ•´ä¸ªæ—¶é—´ `t` èŒƒå›´å†…éƒ½å…·æœ‰**ç›¸å¯¹æ’å®šæ•°å€¼å°ºåº¦**çš„é‡ã€‚æ—¢ç„¶ç›®æ ‡æœ¬èº«å·²ç»â€œå¤©ç„¶å¹³è¡¡â€ï¼Œé‚£ä¸ªç”¨äºâ€œæ‰¾å¹³â€å­¦ä¹ éš¾åº¦çš„å¤–éƒ¨æƒé‡ \(\lambda(t)\)ï¼Œå…¶å¿…è¦æ€§å°±å¤§å¤§é™ä½äº†ã€‚
                    </p>
                </div>
            </section>

        </main>
        
        <footer class="text-center mt-16 text-sm text-gray-500">
            <p>äº¤äº’å¼è§£é‡Šç”± Gemini ç”Ÿæˆ</p>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const slider = document.getElementById('time-slider');
            const paramsDisplay = document.getElementById('params-display');
            const chartCaption = document.getElementById('chart-caption');
            const ctx = document.getElementById('normChart').getContext('2d');

            let chart;

            const update = (t) => {
                // Cosine schedule for alpha and sigma
                const alpha_t = Math.cos(t * 0.5 * Math.PI);
                const sigma_t = Math.sin(t * 0.5 * Math.PI);

                // For visualization, assume high dimension d and orthogonal x1, epsilon with unit variance
                // E[||v||^2] / d = (alpha_t - sigma_t^2)^2 + (sigma_t * alpha_t)^2
                const expected_norm_v_sq_per_dim = Math.pow(alpha_t - sigma_t * sigma_t, 2) + Math.pow(sigma_t * alpha_t, 2);
                const expected_norm_v = Math.sqrt(expected_norm_v_sq_per_dim);
                
                // For epsilon, the target is epsilon itself. Expected norm is sqrt(1) = 1.
                const expected_norm_eps = 1.0;

                // For score, the norm is 1/sigma_t. Handle t=0 case.
                const expected_norm_score = sigma_t > 1e-6 ? 1.0 / sigma_t : 50; // Cap for visualization

                paramsDisplay.innerHTML = `
                    t = ${t.toFixed(2)} <br>
                    &alpha;<sub>t</sub> = ${alpha_t.toFixed(3)} <br>
                    &sigma;<sub>t</sub> = ${sigma_t.toFixed(3)}
                `;
                
                if (!chart) {
                    chart = new Chart(ctx, {
                        type: 'bar',
                        data: {
                            labels: ['ç›®æ ‡ v', 'ç›®æ ‡ Îµ', 'ç›®æ ‡åˆ†æ•° (-Îµ/Ïƒ)'],
                            datasets: [{
                                label: 'ç›®æ ‡å‘é‡çš„æœŸæœ›ç›¸å¯¹å¤§å°',
                                data: [expected_norm_v, expected_norm_eps, expected_norm_score],
                                backgroundColor: [
                                    'rgba(143, 188, 143, 0.6)',
                                    'rgba(210, 180, 140, 0.6)',
                                    'rgba(255, 160, 122, 0.6)'
                                ],
                                borderColor: [
                                    'rgba(143, 188, 143, 1)',
                                    'rgba(210, 180, 140, 1)',
                                    'rgba(255, 160, 122, 1)'
                                ],
                                borderWidth: 1
                            }]
                        },
                        options: {
                            maintainAspectRatio: false,
                            responsive: true,
                            plugins: {
                                legend: {
                                    display: false
                                },
                                tooltip: {
                                    callbacks: {
                                        label: function(context) {
                                            return `${context.dataset.label}: ${context.raw.toFixed(2)}`;
                                        }
                                    }
                                }
                            },
                            scales: {
                                y: {
                                    beginAtZero: true,
                                    title: {
                                        display: true,
                                        text: 'ç›¸å¯¹å¤§å° (èŒƒæ•°)'
                                    },
                                    grid: {
                                      color: 'rgba(0,0,0,0.05)'
                                    }
                                },
                                x: {
                                    grid: {
                                      display: false
                                    }
                                }
                            }
                        }
                    });
                } else {
                    chart.data.datasets[0].data = [expected_norm_v, expected_norm_eps, expected_norm_score];
                    chart.update();
                }

                if (t < 0.1) {
                    chartCaption.textContent = "åœ¨ tâ‰ˆ0 æ—¶ï¼Œåˆ†æ•°ç›®æ ‡è¶‹è¿‘æ— ç©·å¤§ï¼Œè€Œ v ç›®æ ‡å’Œ Îµ ç›®æ ‡å°ºåº¦ç¨³å®šã€‚";
                } else if (t > 0.9) {
                     chartCaption.textContent = "åœ¨ tâ‰ˆ1 æ—¶ï¼Œåˆ†æ•°ç›®æ ‡å’Œ Îµ ç›®æ ‡å°ºåº¦ç¨³å®šï¼Œv ç›®æ ‡ä¹Ÿä¿æŒç¨³å®šã€‚";
                } else {
                    chartCaption.textContent = "åœ¨æ•´ä¸ª t èŒƒå›´å†…ï¼Œv ç›®æ ‡çš„å°ºåº¦å˜åŒ–è¿œæ¯”åˆ†æ•°ç›®æ ‡å¹³ç¼“ã€‚";
                }
            };
            
            slider.addEventListener('input', (event) => {
                update(parseFloat(event.target.value));
            });

            // Initial call
            update(parseFloat(slider.value));
        });
    </script>
  </section>
</div>
</body>
</html>
