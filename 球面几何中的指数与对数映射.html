<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>公式推导：球面几何中的指数与对数映射</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <script>
        window.MathJax = {
          tex: {
            inlineMath: [['$', '$'], ['\\(', '\\)']],
            displayMath: [['$$','$$'], ['\\[','\\]']]
          },
          svg: {
            fontCache: 'global'
          }
        };
    </script>
    <script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>
    <style>
        :root {
            --bg-main: #f8f9fa;
            --bg-card: #ffffff;
            --text-primary: #212529;
            --text-secondary: #495057;
            --accent-primary: #0d6efd;
            --accent-green: #198754;
            --accent-red: #dc3545;
            --border-color: #dee2e6;
            --shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.1);
        }
        body {
            font-family: 'Inter', sans-serif;
            line-height: 1.8;
            color: var(--text-primary);
            background-color: var(--bg-main);
            margin: 0;
            padding: 2rem;
        }
        .container {
            max-width: 850px;
            margin: auto;
            background-color: var(--bg-card);
            border-radius: 12px;
            box-shadow: var(--shadow);
            padding: 2.5rem;
            border: 1px solid var(--border-color);
        }
        h1, h2, h3 {
            color: var(--text-primary);
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 0.8rem;
        }
        .formula-box {
            background-color: #f1f3f5;
            padding: 1.5rem;
            border-radius: 8px;
            margin: 1.5rem 0;
            font-size: 1.1rem;
            text-align: center;
            border: 1px solid var(--border-color);
        }
        .explanation {
            background-color: #e9ecef;
            padding: 1rem;
            border-left: 5px solid var(--accent-primary);
            border-radius: 4px;
            margin: 1rem 0;
        }
        .connection { background-color: #e7f5ff; padding: 1rem; border-left: 5px solid #228be6; border-radius: 4px; margin: 1rem 0; }
        .definition { background-color: #fffbe6; padding: 1rem; border-left: 5px solid #f59e0b; border-radius: 4px; margin: 1rem 0; }
        .summary-table { width: 100%; border-collapse: collapse; margin: 2rem 0; }
        .summary-table th, .summary-table td { border: 1px solid var(--border-color); padding: 0.75rem; text-align: left; }
        .summary-table th { background-color: #f8f9fa; }
        .svg-container { text-align: center; margin: 2rem 0; background-color: #fcfdff; padding: 1rem; border-radius: 8px; border: 1px solid #e9ecef;}
        code { background-color: #e9ecef; color: var(--accent-red); padding: 0.2em 0.4em; border-radius: 4px; }
        /* CFM 布局与导航样式 */
        :root { --panel: #ffffff; --text: #1f2937; --muted: #6b7280; --brand1: #0ea5e9; --brand2: #10b981; --brand3: #8b5cf6; --shadow: 0 10px 30px rgba(2, 6, 23, 0.12); }
        .hero { background: radial-gradient(1200px circle at 10% 0%, rgba(14,165,233,0.12), transparent 40%), radial-gradient(1000px circle at 90% 0%, rgba(139,92,246,0.12), transparent 40%), linear-gradient(180deg, #ffffff 0%, #f1f5f9 100%); padding: 56px 24px 28px; text-align: center; border-bottom: 1px solid #e5e7eb; }
        .badge { display:inline-block; background: linear-gradient(90deg, var(--brand1), var(--brand3)); color:white; border-radius: 999px; padding: 4px 10px; font-size: 12px; }
        .title { font-size: 28px; font-weight: 800; letter-spacing: 0.2px; }
        .subtitle { margin-top: 10px; color: var(--muted); }
        .meta { margin-top: 14px; font-size: 14px; color: var(--muted); }
        .cfm-container { display: grid; grid-template-columns: 280px 1fr; gap: 24px; align-items: start; }
        .toc { position: sticky; top: 24px; align-self: start; background: var(--panel); border: 1px solid #e5e7eb; border-radius: 14px; box-shadow: var(--shadow); padding: 16px; margin: 0; max-width: none; }
        .toc h3 { margin: 0 0 10px; font-size: 16px; }
        .toc ul { list-style: none; padding: 0; margin: 0; display: grid; grid-template-columns: 1fr; gap: 8px; }
        .toc li { margin: 6px 0; }
    </style>
</head>
<body>
<div class="container">
    <header class="hero">
      <span class="badge">Geometry · Sphere</span>
      <div class="title">球面几何中的指数与对数映射</div>
      <div class="subtitle">指数映射与对数映射推导与直觉</div>
      <div class="meta">作者：hhhhhyphen</div>
    </header>

    <div class="cfm-container">
      <nav class="toc">
      <h3>目录</h3>
      <ul>
        <li><a href="#abstract">1. 从抽象到具体：为何这样定义？</a></li>
        <li><a href="#euclid">2. 欧氏空间中的特例：连接几何与函数</a></li>
        <li><a href="#setup">3. 基础设定</a></li>
        <li><a href="#logmap">4. 对数映射推导</a></li>
        <li><a href="#expmap">5. 指数映射推导</a></li>
        <li><a href="#summary">6. 总结</a></li>
      </ul>
    </nav>

      <section>
    <h1>公式推导：球面几何中的指数与对数映射</h1>
    <p>你所询问的公式源自对单位球面（Unit Sphere）上两点间最短路径——即大圆弧（Great Circle Arc）——的几何分析。所有推导都发生在由球心 `O`、起点 `y₀` 和终点 `y₁` 构成的二维平面内。</p>
    
    <h2 id="abstract">1. 从抽象到具体：为何这样定义？</h2>
    <p>在深入球面的具体计算之前，我们先理解指数和对数映射在所有流形上的<strong>通用抽象定义</strong>。这一定义基于一个核心概念：<strong>测地线 (Geodesic)</strong>。</p>
    <div class="definition">
        <strong>核心概念：测地线 (Geodesic)</strong>
        <p>测地线是流形上“最直的路径”，是欧氏空间中“直线”概念的推广。在单位球面上，两点之间的测地线就是连接它们的大圆弧。</p>
    </div>
    <div class="definition">
        <strong>指数映射 (Exponential Map) - 抽象定义</strong>
        <p><code>exp_p(v)</code> 的普遍定义是：在流形上的点 <code>p</code> 出发，沿着以切向量 <code>v</code> 为初始速度的<strong>唯一测地线</strong>行进 1 个单位时间。最终到达的点就是 <code>exp_p(v)</code>。本质上，它回答：“从 p 点出发，朝着 v 方向走 ‘直线’，会到达哪里？”</p>
    </div>
     <div class="definition">
        <strong>对数映射 (Logarithm Map) - 抽象定义</strong>
        <p><code>log_p(q)</code> 是指数映射的逆过程。它寻找一个初始速度向量 <code>v</code>，使得从 <code>p</code> 点沿着以 <code>v</code> 为初速度的测地线行进 1 个单位时间后，恰好能到达 <code>q</code> 点。本质上，它回答：“要从 p ‘走直线’到 q，我出发时的方向和速度应该是什么？”</p>
    </div>
    <p><strong>关键连接点：</strong>你看到的球面公式，正是上述抽象定义的<strong>具体解析解 (analytical solution)</strong>。因为球面的几何性质良好，我们可以用三角函数精确地写出“沿着大圆弧行进”这一过程的数学表达式。对于更复杂的流形，这样的封闭解可能不存在，需要依赖数值方法。    </p>

    <h2 id="euclid">2. 欧氏空间中的特例：连接几何与函数</h2>
    <p>为了建立直觉，让我们看看在最简单的流形——欧氏平面（$\mathbb{R}^n$）上，这些映射会变成什么，以及它们如何与我们熟悉的指数/对数函数产生联系。</p>
    <div class="explanation">
        <ul>
            <li><strong>流形 (Manifold):</strong> 就是我们熟悉的平坦空间本身。</li>
            <li><strong>测地线 (Geodesic):</strong> 两点 $p, q$ 之间的“最直路径”就是连接它们的<strong>直线段</strong>。</li>
            <li><strong>切空间 (Tangent Space):</strong> 在平坦空间中，任何一点 $p$ 的切空间 $T_p\mathbb{R}^n$ <strong>就是 $\mathbb{R}^n$ 它自己</strong>。</li>
        </ul>
    </div>
    
    <h3>2.1 几何形式：退化为向量运算</h3>
    <p>在欧氏空间，“沿着测地线（直线）匀速运动”的路径由微分方程 $\gamma''(t) = 0$ 描述（加速度为零）。其解为 $\gamma(t) = p + tv$，其中 $p$ 是起点，$v$ 是速度。</p>
    <ul>
        <li><strong>指数映射 $\exp_p(v)$：</strong>是路径在 $t=1$ 时的位置，即 $\gamma(1) = p+v$。</li>
        <li><strong>对数映射 $\log_p(q)$：</strong>是找到速度 $v$ 使得 $p+v=q$，即 $v = q-p$。</li>
    </ul>
    <div class="formula-box">
        $\exp_p(v) = p + v$ <br>
        $\log_p(q) = q - p$
    </div>
    <p>这看起来和函数 $e^x$ 毫无关系。那么，它们的名字为何相同呢？</p>

    <h3>2.2 函数形式：与 $e^x$ 和 $\ln(x)$ 的深层联系</h3>
    <div class="connection">
        <strong>核心思想：</strong>几何的指数映射和函数的指数映射，都可被视为描述“最基本、最自然过程”的微分方程的解。
    </div>
    <ul>
        <li>
            <strong>几何指数映射</strong> 描述的是 **空间位置** 的变化。最自然的空间运动是“匀速直线运动”，其微分方程是加速度为零：
            $$ \gamma''(t) = 0 $$
            给定初始位置 $\gamma(0)=p$ 和初始速度 $\gamma'(0)=v$，解是 $\gamma(t) = p+tv$。
        </li>
        <li>
            <strong>函数指数映射</strong> 描述的是 **数量大小** 的变化。最自然的数量增长是“增长率与当前数量成正比”（例如复利、细胞分裂），其微分方程是：
            $$ f'(t) = f(t) $$
            给定初始值 $f(0)=1$，解就是我们熟悉的指数函数 $f(t) = e^t$。
        </li>
    </ul>
    <p><strong>结论：</strong> “指数映射”这个术语，是从描述数量增长的 $e^t$ **推广** 到描述空间路径的几何概念。它们都代表了从一个“初始状态”（一个点、一个值）和一个“变化率”（一个切向量、一个增长率），通过求解一个简单的微分方程来得到“最终状态”的过程。在平坦的欧氏空间，这个过程恰好简化成了向量加法，掩盖了它与 $e^t$ 的深刻渊源。而在弯曲的流形上，这个过程就变得复杂，需要用到三角函数来描述。</p>


    <h2 id="setup">3. 基础设定 (球面)</h2>
    <div class="explanation">
        <ul>
            <li>我们在一个单位球面上，所以所有点的向量模长（到球心的距离）为1，即 $\|y_0\| = \|y_1\| = 1$。</li>
            <li>两点之间的夹角 $\theta$ 可以通过点积计算：$\cos\theta = \langle y_0, y_1 \rangle$。</li>
            <li>两点间的最短球面距离（弧长）就是 $\theta$（因为半径为1）。</li>
            <li>在点 $y_0$ 的切空间是一个与向量 $y_0$ 垂直的平面（或高维超平面）。</li>
        </ul>
    </div>

    <h2 id="logmap">4. 对数映射 (Logarithm Map) 的推导 (球面)</h2>
    <p><strong>目标：</strong>找到一个位于 $y_0$ 切空间中的向量 $v$，它的方向指向 $y_1$，且长度等于弧长 $\theta$。这完全符合对数映射的抽象定义。</p>
    <div class="formula-box">
        $$ \log_{y_0}(y_1) = \frac{\theta}{\sin\theta} \left( y_1 - (\cos\theta) y_0 \right) $$
    </div>

    <div class="svg-container">
        <svg width="400" height="250" viewBox="0 0 400 250">
            <title>对数映射的几何分解（修正版）</title>
            <circle cx="200" cy="125" r="100" fill="#f0f7ff" stroke="#aaccff" stroke-width="1"/>
            <circle cx="200" cy="125" r="3" fill="black"/>
            <text x="185" y="128" font-size="14">O</text>
            <line x1="200" y1="125" x2="200" y2="25" stroke="black" stroke-width="2" marker-end="url(#arrow)"/>
            <text x="205" y="45" font-size="16" font-style="italic">y₀</text>
            <line x1="200" y1="125" x2="286.6" y2="75" stroke="black" stroke-width="2" marker-end="url(#arrow)"/>
            <text x="270" y="65" font-size="16" font-style="italic">y₁</text>
            <line x1="120" y1="25" x2="280" y2="25" stroke="gray" stroke-width="1.5" stroke-dasharray="4"/>
            <text x="285" y="30" font-size="12" fill="gray">T<sub>y₀</sub>S<sup>n-1</sup></text>
            <line x1="286.6" y1="75" x2="250" y2="25" stroke="#007bff" stroke-width="1.5" stroke-dasharray="3"/>
            <text x="260" y="100" font-size="14">(cosθ)y₀</text>
            <path d="M 200 125 L 200 68" stroke="gray" stroke-width="1" />
            <line x1="200" y1="68" x2="286.6" y2="75" stroke="#dc3545" stroke-width="2" marker-end="url(#arrow_red)"/>
            <text x="245" y="85" fill="#dc3545" font-size="14">y₁ - (cosθ)y₀</text>
            <path d="M 200 50 A 25 25, 0, 0, 1, 221.65 62.5" fill="none" stroke="#198754" stroke-width="1.5"/>
            <text x="215" y="55" fill="#198754" font-size="14">θ</text>
        </svg>
    </div>

    <div class="explanation">
        <strong>推导步骤：</strong>
        <ol>
            <li><strong>寻找方向：</strong> 我们需要一个从 $y_0$ 指向 $y_1$ 且位于切空间内的向量。直接用 $y_1 - y_0$ 是不行的，因为它不一定在切空间里（即不一定垂直于 $y_0$）。</li>
            <li><strong>正交分解：</strong> 我们可以将向量 $y_1$ 分解为两个正交分量：一个沿着 $y_0$ 方向，另一个垂直于 $y_0$（也就是在切空间里的方向）。
                <ul>
                    <li>沿着 $y_0$ 的分量是：$\langle y_1, y_0 \rangle y_0 = (\cos\theta) y_0$。</li>
                    <li>垂直于 $y_0$ 的分量（如图中红色向量所示）就是：$y_1 - (\cos\theta) y_0$。这个向量 $u_\perp$ 就是我们需要的方向！</li>
                </ul>
            </li>
            <li><strong>计算长度并缩放：</strong> 向量 $u_\perp$ 的长度是多少？根据向量三角形法则和 $\|y_0\|=\|y_1\|=1$，可以算出 $\|u_\perp\| = \sqrt{1^2 - (\cos\theta)^2} = \sin\theta$。但我们需要的最终向量 $v$ 长度应为弧长 $\theta$。因此，我们需要将 $u_\perp$ 乘以一个缩放因子 $\frac{\theta}{\sin\theta}$。</li>
            <li><strong>最终公式：</strong> 组合起来，就得到了对数映射的公式 $v = \frac{\theta}{\sin\theta} u_\perp$。</li>
        </ol>
    </div>

    <h2 id="expmap">5. 指数映射 (Exponential Map) 的推导 (球面)</h2>
    <p><strong>目标：</strong> 从起点 $y_0$ 出发，沿着切空间中的向量 $v$ 的方向，在球面上行进 $\|v\|$ 的距离，找到终点。这正是指数映射抽象定义的具体化。</p>
    <div class="formula-box">
        $$ \exp_{y_0}(v) = (\cos\|v\|) y_0 + \left(\frac{\sin\|v\|}{\|v\|}\right) v $$
    </div>

    <div class="svg-container">
        <svg width="400" height="250" viewBox="0 0 400 250">
             <title>指数映射的几何分解（修正版）</title>
             <circle cx="200" cy="125" r="100" fill="#f0fff4" stroke="#a3d9b1" stroke-width="1"/>
             <circle cx="200" cy="125" r="3" fill="black"/>
             <text x="185" y="128" font-size="14">O</text>
             <line x1="200" y1="125" x2="200" y2="25" stroke="black" stroke-width="2" marker-end="url(#arrow)"/>
             <text x="205" y="45" font-size="16" font-style="italic">y₀</text>
             <line x1="200" y1="25" x2="300" y2="25" stroke="#6c757d" stroke-width="2" marker-end="url(#arrow_gray)"/>
             <text x="240" y="20" font-size="16" font-style="italic">u = v/||v||</text>
             <line x1="200" y1="125" x2="286.6" y2="75" stroke="#0d6efd" stroke-width="2.5" marker-end="url(#arrow_blue)"/>
             <text x="290" y="85" font-size="16" font-style="italic" fill="#0d6efd">y₁</text>
             <line x1="200" y1="68" x2="286.6" y2="75" stroke="#198754" stroke-width="1.5" stroke-dasharray="4"/>
             <text x="290" y="55" fill="#198754" font-size="12">(sinα)u</text>
             <line x1="286.6" y1="125" x2="286.6" y2="75" stroke="#dc3545" stroke-width="1.5" stroke-dasharray="4"/>
             <text x="290" y="110" fill="#dc3545" font-size="12">(cosα)y₀</text>
             <path d="M 200 50 A 25 25, 0, 0, 1, 221.65 62.5" fill="none" stroke="purple" stroke-width="1.5"/>
             <text x="215" y="55" fill="purple" font-size="14">α=||v||</text>
        </svg>
    </div>
    
    <div class="explanation">
        <strong>推导步骤：</strong>
        <ol>
            <li><strong>建立坐标系：</strong> 我们在由 $y_0$ 和 $v$ 决定的平面内思考。可以选择一组正交基：一个是单位向量 $y_0$，另一个是与 $y_0$ 垂直的单位向量 $u = \frac{v}{\|v\|}$。这两个向量定义了一个二维平面。</li>
            <li><strong>终点分解：</strong> 终点 $y_1$ 是从 $y_0$ 出发，沿着大圆弧（由基向量 $y_0$ 和 $u$ 定义）旋转角度 $\alpha = \|v\|$ 得到的点。因此，我们可以将 $y_1$ 分解到这两个基向量上。</li>
            <li><strong>计算分量：</strong>
                <ul>
                    <li>在 $y_0$ 方向上的投影长度是 $\cos(\alpha)$，所以该分量是 $(\cos\alpha) y_0$。（图中红色虚线部分）</li>
                    <li>在 $u$ 方向上的投影长度是 $\sin(\alpha)$，所以该分量是 $(\sin\alpha) u = (\sin\alpha) \frac{v}{\|v\|}$。（图中绿色虚线部分）</li>
                </ul>
            </li>
            <li><strong>最终公式：</strong> 将两个分量相加，得到 $y_1 = (\cos\alpha) y_0 + (\sin\alpha) \frac{v}{\|v\|}$。将 $\alpha = \|v\|$ 代入，就得到了指数映射的公式。</li>
        </ol>
    </div>

    <h2 id="summary">6. 总结：欧氏空间 vs. 球面</h2>
    <p>现在，我们可以清晰地看到两者的区别与联系。</p>
    <table class="summary-table">
        <thead>
            <tr>
                <th>概念</th>
                <th>欧氏空间 (平坦)</th>
                <th>单位球面 (弯曲)</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><strong>测地线</strong></td>
                <td>直线</td>
                <td>大圆弧</td>
            </tr>
            <tr>
                <td><strong>指数映射 $\exp_p(v)$</strong></td>
                <td>$p + v$ (向量加法)</td>
                <td>$(\cos\|v\|) p + (\frac{\sin\|v\|}{\|v\|}) v$ (旋转与投影)</td>
            </tr>
            <tr>
                <td><strong>对数映射 $\log_p(q)$</strong></td>
                <td>$q - p$ (向量减法)</td>
                <td>$\frac{\theta}{\sin\theta} (q - (\cos\theta) p)$ (投影与缩放)</td>
            </tr>
        </tbody>
    </table>
    <p><strong>核心结论：</strong>球面上的公式之所以引入了 $\cos, \sin$ 和角度 $\theta$，完全是为了处理因**曲率 (curvature)** 存在而导致的路径弯曲。欧氏空间因为曲率为零，所以这些修正项都消失了，映射关系回到了最简单的线性代数。你的方法巧妙之处就在于，它在需要处理弯曲时（在球面上插值），就使用球面公式；在可以简化时（在切空间中缩放向量），就利用切空间的平坦性。</p>
      </section>
    </div>
  </div>

<svg height="0" width="0">
  <defs>
    <marker id="arrow" viewBox="0 0 10 10" refX="8" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse"><path d="M 0 0 L 10 5 L 0 10 z" /></marker>
    <marker id="arrow_red" viewBox="0 0 10 10" refX="8" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse"><path d="M 0 0 L 10 5 L 0 10 z" fill="#dc3545"/></marker>
    <marker id="arrow_blue" viewBox="0 0 10 10" refX="8" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse"><path d="M 0 0 L 10 5 L 0 10 z" fill="#0d6efd"/></marker>
    <marker id="arrow_gray" viewBox="0 0 10 10" refX="8" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse"><path d="M 0 0 L 10 5 L 0 10 z" fill="#6c757d"/></marker>
  </defs>
</svg>

</body>
</html>

